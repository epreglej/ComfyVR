import{bK as ue}from"./DYwu2xH9.js";function fe($,H){for(var g=0;g<H.length;g++){const E=H[g];if(typeof E!="string"&&!Array.isArray(E)){for(const b in E)if(b!=="default"&&!(b in $)){const N=Object.getOwnPropertyDescriptor(E,b);N&&Object.defineProperty($,b,N.get?N:{enumerable:!0,get:()=>E[b]})}}}return Object.freeze(Object.defineProperty($,Symbol.toStringTag,{value:"Module"}))}var de={exports:{}};(function($){(function(H){$.exports?(H.default=H,$.exports=H):H(typeof Highcharts<"u"?Highcharts:void 0)})(function(H){var g=H?H._modules:{};function E(b,N,F,z){b.hasOwnProperty(N)||(b[N]=z.apply(null,F),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:N,module:b[N]}})))}E(g,"Series/NodesComposition.js",[g["Core/Series/SeriesRegistry.js"],g["Core/Utilities.js"]],function(b,N){var F;let{series:{prototype:z,prototype:{pointClass:{prototype:P}}}}=b,{defined:L,extend:I,find:h,merge:p,pick:i}=N;return function(o){function n(){return this.data=[].concat(this.points||[],this.nodes),z.destroy.apply(this,arguments)}function c(){this.nodes&&(this.nodes.forEach(a=>{a.destroy()}),this.nodes.length=0),z.setData.apply(this,arguments)}function y(a){let s=arguments,t=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];a!=="select"&&t.forEach(r=>{r&&r.series&&(P.setState.apply(r,s),!r.isNode&&(r.fromNode.graphic&&P.setState.apply(r.fromNode,s),r.toNode&&r.toNode.graphic&&P.setState.apply(r.toNode,s)))}),P.setState.apply(this,s)}function m(a,s,t,r){let S=this.series.options.nodes,d=this.series.options.data,u=d&&d.length||0,x=d&&d[this.index];if(P.update.call(this,a,!this.isNode&&s,t,r),this.isNode){let e=(S||[]).reduce((f,k,v)=>this.id===k.id?v:f,-1),l=p(S&&S[e]||{},d&&d[this.index]||{});d&&(x?d[this.index]=x:d.length=u),S?e>=0?S[e]=l:S.push(l):this.series.options.nodes=[l],i(s,!0)&&this.series.chart.redraw(t)}}o.compose=function(a,s){let t=a.prototype,r=s.prototype;return t.setNodeState=y,t.setState=y,t.update=m,r.destroy=n,r.setData=c,s},o.createNode=function(a){let s=this.pointClass,t=(d,u)=>h(d,x=>x.id===u),r=t(this.nodes,a),S;if(!r){S=this.options.nodes&&t(this.options.nodes,a);let d=new s(this,I({className:"highcharts-node",isNode:!0,id:a,y:1},S));d.linksTo=[],d.linksFrom=[],d.getSum=function(){let u=0,x=0;return d.linksTo.forEach(e=>{u+=e.weight||0}),d.linksFrom.forEach(e=>{x+=e.weight||0}),Math.max(u,x)},d.offset=function(u,x){let e=0;for(let l=0;l<d[x].length;l++){if(d[x][l]===u)return e;e+=d[x][l].weight}},d.hasShape=function(){let u=0;return d.linksTo.forEach(x=>{x.outgoing&&u++}),!d.linksTo.length||u!==d.linksTo.length},d.index=this.nodes.push(d)-1,r=d}return r.formatPrefix="node",r.name=r.name||r.options.id||"",r.mass=i(r.options.mass,r.options.marker&&r.options.marker.radius,this.options.marker&&this.options.marker.radius,4),r},o.destroy=n,o.generatePoints=function(){let a=this.chart,s={};z.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach(t=>{t.linksFrom.length=0,t.linksTo.length=0,t.level=t.options.level}),this.points.forEach(t=>{L(t.from)&&(s[t.from]||(s[t.from]=this.createNode(t.from)),s[t.from].linksFrom.push(t),t.fromNode=s[t.from],a.styledMode?t.colorIndex=i(t.options.colorIndex,s[t.from].colorIndex):t.color=t.options.color||s[t.from].color),L(t.to)&&(s[t.to]||(s[t.to]=this.createNode(t.to)),s[t.to].linksTo.push(t),t.toNode=s[t.to]),t.name=t.name||t.id},this),this.nodeLookup=s},o.setNodeState=y,o.updateNode=m}(F||(F={})),F}),E(g,"Series/Sankey/SankeyPoint.js",[g["Core/Series/Point.js"],g["Core/Series/SeriesRegistry.js"],g["Core/Utilities.js"]],function(b,N,F){let{column:z}=N.seriesTypes,{defined:P}=F;class L extends z.prototype.pointClass{applyOptions(h,p){return b.prototype.applyOptions.call(this,h,p),P(this.options.level)&&(this.options.column=this.column=this.options.level),this}getClassName(){return(this.isNode?"highcharts-node ":"highcharts-link ")+b.prototype.getClassName.call(this)}getFromNode(){let h=-1,p;for(let i=0;i<this.linksTo.length;i++){let o=this.linksTo[i];o.fromNode.column>h&&o.fromNode!==this&&(h=(p=o.fromNode).column)}return{fromNode:p,fromColumn:h}}setNodeColumn(){P(this.options.column)||(this.linksTo.length===0?this.column=0:this.column=this.getFromNode().fromColumn+1)}isValid(){return this.isNode||typeof this.weight=="number"}}return L}),E(g,"Series/Sankey/SankeySeriesDefaults.js",[],function(){return{borderWidth:0,colorByPoint:!0,curveFactor:.33,dataLabels:{enabled:!0,backgroundColor:"none",crop:!1,nodeFormat:void 0,nodeFormatter:function(){return this.point.name},format:void 0,formatter:function(){},inside:!0},inactiveOtherPoints:!0,linkColorMode:"from",linkOpacity:.5,opacity:1,minLinkWidth:0,nodeAlignment:"center",nodeWidth:20,nodePadding:10,nodeDistance:30,showInLegend:!1,states:{hover:{linkOpacity:1,opacity:1},inactive:{linkOpacity:.1,opacity:.1,animation:{duration:50}}},tooltip:{followPointer:!0,headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:"{point.fromNode.name} â†’ {point.toNode.name}: <b>{point.weight}</b><br/>",nodeFormat:"{point.name}: <b>{point.sum}</b><br/>"}}}),E(g,"Series/Sankey/SankeyColumnComposition.js",[g["Core/Utilities.js"]],function(b){var N;let{defined:F,relativeLength:z}=b;return function(P){P.compose=function(I,h){return I.sankeyColumn=new L(I,h),I};class L{constructor(h,p){this.points=h,this.series=p}getTranslationFactor(h){let p=this.points,i=p.slice(),o=h.chart,n=h.options.minLinkWidth||0,c,y=0,m,a=(o.plotSizeY||0)-(h.options.borderWidth||0)-(p.length-1)*h.nodePadding;for(;p.length;){for(y=a/p.sankeyColumn.sum(),c=!1,m=p.length;m--;)p[m].getSum()*y<n&&(p.splice(m,1),a=Math.max(0,a-n),c=!0);if(!c)break}for(let s of(p.length=0,i))p.push(s);return y}top(h){let p=this.series,i=p.nodePadding,o=this.points.reduce((n,c)=>(n>0&&(n+=i),n+=Math.max(c.getSum()*h,p.options.minLinkWidth||0)),0);return{top:0,center:.5,bottom:1}[p.options.nodeAlignment||"center"]*((p.chart.plotSizeY||0)-o)}left(h){let p=this.series,i=p.chart,o=p.options.equalNodes,n=i.inverted?i.plotHeight:i.plotWidth,c=p.nodePadding,y=this.points.reduce((m,a)=>(m>0&&(m+=c),m+=o?n/a.series.nodes.length-c:Math.max(a.getSum()*h,p.options.minLinkWidth||0)),0);return((i.plotSizeX||0)-Math.round(y))/2}sum(){return this.points.reduce((h,p)=>h+p.getSum(),0)}offset(h,p){let i=this.points,o=this.series,n=o.nodePadding,c=0,y;if(o.is("organization")&&h.hangsFrom)return{absoluteTop:h.hangsFrom.nodeY};for(let m=0;m<i.length;m++){let a=i[m].getSum(),s=Math.max(a*p,o.options.minLinkWidth||0),t=h.options[o.chart.inverted?"offsetHorizontal":"offsetVertical"],r=h.options.offset||0;if(y=a?s+n:0,i[m]===h)return{relativeTop:c+(F(t)?z(t,s):z(r,y))};c+=y}}}P.SankeyColumnAdditions=L}(N||(N={})),N}),E(g,"Series/TreeUtilities.js",[g["Core/Color/Color.js"],g["Core/Utilities.js"]],function(b,N){let{extend:F,isArray:z,isNumber:P,isObject:L,merge:I,pick:h,relativeLength:p}=N;return{getColor:function(i,o){let n,c,y,m,a,s,t=o.index,r=o.mapOptionsToLevel,S=o.parentColor,d=o.parentColorIndex,u=o.series,x=o.colors,e=o.siblings,l=u.points,f=u.chart.options.chart;return i&&(n=l[i.i],c=r[i.level]||{},n&&c.colorByPoint&&(m=n.index%(x?x.length:f.colorCount),y=x&&x[m]),u.chart.styledMode||(a=h(n&&n.options.color,c&&c.color,y,S&&(k=>{let v=c&&c.colorVariation;return v&&v.key==="brightness"&&t&&e?b.parse(k).brighten(v.to*(t/e)).get():k})(S),u.color)),s=h(n&&n.options.colorIndex,c&&c.colorIndex,m,d,o.colorIndex)),{color:a,colorIndex:s}},getLevelOptions:function(i){let o,n,c,y,m,a,s={};if(L(i))for(y=P(i.from)?i.from:1,a=i.levels,n={},o=L(i.defaults)?i.defaults:{},z(a)&&(n=a.reduce((t,r)=>{let S,d,u;return L(r)&&P(r.level)&&(d=h((u=I({},r)).levelIsConstant,o.levelIsConstant),delete u.levelIsConstant,delete u.level,L(t[S=r.level+(d?0:y-1)])?I(!0,t[S],u):t[S]=u),t},{})),m=P(i.to)?i.to:1,c=0;c<=m;c++)s[c]=I({},o,L(n[c])?n[c]:{});return s},getNodeWidth:function(i,o){let{chart:n,options:c}=i,{nodeDistance:y=0,nodeWidth:m=0}=c,{plotSizeX:a=1}=n;if(m==="auto"){if(typeof y=="string"&&/%$/.test(y))return a/(o+parseFloat(y)/100*(o-1));let s=Number(y);return(a+s)/(o||1)-s}return p(m,a)},setTreeValues:function i(o,n){let c=n.before,y=n.idRoot,m=n.mapIdToNode[y],a=n.levelIsConstant!==!1,s=n.points[o.i],t=s&&s.options||{},r=[],S=0;o.levelDynamic=o.level-(a?0:m.level),o.name=h(s&&s.name,""),o.visible=y===o.id||n.visible===!0,typeof c=="function"&&(o=c(o,n)),o.children.forEach((u,x)=>{let e=F({},n);F(e,{index:x,siblings:o.children.length,visible:o.visible}),u=i(u,e),r.push(u),u.visible&&(S+=u.val)});let d=h(t.value,S);return o.visible=d>=0&&(S>0||o.visible),o.children=r,o.childrenTotal=S,o.isLeaf=o.visible&&!S,o.val=d,o},updateRootId:function(i){let o,n;return L(i)&&(n=L(i.options)?i.options:{},o=h(i.rootNode,n.rootId,""),L(i.userOptions)&&(i.userOptions.rootId=o),i.rootNode=o),o}}}),E(g,"Series/Sankey/SankeySeries.js",[g["Core/Globals.js"],g["Series/NodesComposition.js"],g["Series/Sankey/SankeyPoint.js"],g["Series/Sankey/SankeySeriesDefaults.js"],g["Core/Series/SeriesRegistry.js"],g["Series/Sankey/SankeyColumnComposition.js"],g["Core/Color/Color.js"],g["Series/TreeUtilities.js"],g["Core/Utilities.js"]],function(b,N,F,z,P,L,I,h,p){let{column:i,line:o}=P.seriesTypes,{parse:n}=I,{getLevelOptions:c,getNodeWidth:y}=h,{clamp:m,extend:a,isObject:s,merge:t,pick:r,relativeLength:S,stableSort:d}=p;class u extends i{static getDLOptions(e){let l=s(e.optionsPoint)?e.optionsPoint.dataLabels:{};return t({style:{}},s(e.level)?e.level.dataLabels:{},l)}createNodeColumns(){let e=[];for(let l of this.nodes)l.setNodeColumn(),e[l.column]||(e[l.column]=L.compose([],this)),e[l.column].push(l);for(let l=0;l<e.length;l++)e[l]===void 0&&(e[l]=L.compose([],this));return e}order(e,l){if(e.level===void 0)for(let f of(e.level=l,e.linksFrom))f.toNode&&this.order(f.toNode,l+1)}generatePoints(){if(N.generatePoints.apply(this,arguments),this.orderNodes){for(let e of this.nodes)e.linksTo.length===0&&this.order(e,0);d(this.nodes,(e,l)=>e.level-l.level)}}getNodePadding(){let e=this.options.nodePadding||0;if(this.nodeColumns){let l=this.nodeColumns.reduce((f,k)=>Math.max(f,k.length),0);l*e>this.chart.plotSizeY&&(e=this.chart.plotSizeY/l)}return e}hasData(){return!!this.processedXData.length}pointAttribs(e,l){if(!e)return{};let f=this,k=e.isNode?e.level:e.fromNode.level,v=f.mapOptionsToLevel[k||0]||{},Y=e.options,T=v.states&&v.states[l||""]||{},A=["colorByPoint","borderColor","borderWidth","linkOpacity","opacity"].reduce((X,w)=>(X[w]=r(T[w],Y[w],v[w],f.options[w]),X),{}),B=r(T.color,Y.color,A.colorByPoint?e.color:v.color);return e.isNode?{fill:B,stroke:A.borderColor,"stroke-width":A.borderWidth,opacity:A.opacity}:{fill:I.parse(B).setOpacity(A.linkOpacity).get()}}drawTracker(){i.prototype.drawTracker.call(this,this.points),i.prototype.drawTracker.call(this,this.nodes)}drawPoints(){i.prototype.drawPoints.call(this,this.points),i.prototype.drawPoints.call(this,this.nodes)}drawDataLabels(){i.prototype.drawDataLabels.call(this,this.points),i.prototype.drawDataLabels.call(this,this.nodes)}translate(){this.processedXData||this.processData(),this.generatePoints(),this.nodeColumns=this.createNodeColumns();let e=this,l=this.chart,f=this.options,k=this.nodeColumns,v=k.length;for(let Y of(this.nodeWidth=y(this,v),this.nodePadding=this.getNodePadding(),this.translationFactor=k.reduce((T,A)=>Math.min(T,A.sankeyColumn.getTranslationFactor(e)),1/0),this.colDistance=(l.plotSizeX-this.nodeWidth-f.borderWidth)/Math.max(1,k.length-1),e.mapOptionsToLevel=c({from:1,levels:f.levels,to:k.length-1,defaults:{borderColor:f.borderColor,borderRadius:f.borderRadius,borderWidth:f.borderWidth,color:e.color,colorByPoint:f.colorByPoint,levelIsConstant:!0,linkColor:f.linkColor,linkLineWidth:f.linkLineWidth,linkOpacity:f.linkOpacity,states:f.states}}),k))for(let T of Y)e.translateNode(T,Y);for(let Y of this.nodes)for(let T of Y.linksFrom)(T.weight||T.isNull)&&T.to&&(e.translateLink(T),T.allowShadow=!1)}translateLink(e){let l=(D,R)=>{let V=D.offset(e,R)*T;return Math.min(D.nodeY+V,D.nodeY+(D.shapeArgs&&D.shapeArgs.height||0)-C)},f=e.fromNode,k=e.toNode,v=this.chart,{inverted:Y}=v,T=this.translationFactor,A=this.options,B=r(e.linkColorMode,A.linkColorMode),X=(v.inverted?-this.colDistance:this.colDistance)*A.curveFactor,w=f.nodeX,j=k.nodeX,q=e.outgoing,C=Math.max(e.weight*T,this.options.minLinkWidth),M=l(f,"linksFrom"),O=l(k,"linksTo"),W=this.nodeWidth,U=j>w+W;if(v.inverted&&(M=v.plotSizeY-M,O=(v.plotSizeY||0)-O,W=-W,C=-C,U=w>j),e.shapeType="path",e.linkBase=[M,M+C,O,O+C],U&&typeof O=="number")e.shapeArgs={d:[["M",w+W,M],["C",w+W+X,M,j-X,O,j,O],["L",j+(q?W:0),O+C/2],["L",j,O+C],["C",j-X,O+C,w+W+X,M+C,w+W,M+C],["Z"]]};else if(typeof O=="number"){let D=v.plotHeight-M-C,R=j-20-C,V=j-20,Z=w+W,G=Z+20,ee=G+C,se=M,K=M+C,te=K+20,J=te+D,_=J+20,oe=_+C,ie=O,Q=ie+C,ne=Q+20,pe=K-.7*C,re=_+.7*C,ce=Q-.7*C,le=j-.7*C,ae=Z+.7*C;e.shapeArgs={d:[["M",Z,se],["C",ae,se,ee,pe,ee,te],["L",ee,J],["C",ee,re,ae,oe,Z,oe],["L",j,oe],["C",le,oe,R,re,R,J],["L",R,ne],["C",R,ce,le,ie,j,ie],["L",j,Q],["C",V,Q,V,Q,V,ne],["L",V,J],["C",V,_,V,_,j,_],["L",Z,_],["C",G,_,G,_,G,J],["L",G,te],["C",G,K,G,K,Z,K],["Z"]]}}if(e.dlBox={x:w+(j-w+W)/2,y:M+(O-M)/2,height:C,width:0},e.tooltipPos=v.inverted?[v.plotSizeY-e.dlBox.y-C/2,v.plotSizeX-e.dlBox.x]:[e.dlBox.x,e.dlBox.y+C/2],e.y=e.plotY=1,e.x=e.plotX=1,!e.options.color){if(B==="from")e.color=f.color;else if(B==="to")e.color=k.color;else if(B==="gradient"){let D=n(f.color).get(),R=n(k.color).get();e.color={linearGradient:{x1:1,x2:0,y1:0,y2:0},stops:[[0,Y?D:R],[1,Y?R:D]]}}}}translateNode(e,l){let f=this.translationFactor,k=this.chart,v=this.options,{borderRadius:Y,borderWidth:T=0}=v,A=e.getSum(),B=Math.max(Math.round(A*f),this.options.minLinkWidth),X=Math.round(this.nodeWidth),w=Math.round(T)%2/2,j=l.sankeyColumn.offset(e,f),q=Math.floor(r(j.absoluteTop,l.sankeyColumn.top(f)+j.relativeTop))+w,C=Math.floor(this.colDistance*e.column+T/2)+S(e.options[k.inverted?"offsetVertical":"offsetHorizontal"]||0,X)+w,M=k.inverted?k.plotSizeX-C:C;if(e.sum=A,A){e.shapeType="roundedRect",e.nodeX=M,e.nodeY=q;let O=M,W=q,U=e.options.width||v.width||X,D=e.options.height||v.height||B,R=m(S(typeof Y=="object"?Y.radius:Y||0,U),0,B/2);k.inverted&&(O=M-X,W=k.plotSizeY-q-B,U=e.options.height||v.height||X,D=e.options.width||v.width||B),e.dlOptions=u.getDLOptions({level:this.mapOptionsToLevel[e.level],optionsPoint:e.options}),e.plotX=1,e.plotY=1,e.tooltipPos=k.inverted?[k.plotSizeY-W-D/2,k.plotSizeX-O-U/2]:[O+U/2,W+D/2],e.shapeArgs={x:O,y:W,width:U,height:D,r:R,display:e.hasShape()?"":"none"}}else e.dlOptions={enabled:!1}}}return u.defaultOptions=t(i.defaultOptions,z),N.compose(F,u),a(u.prototype,{animate:o.prototype.animate,createNode:N.createNode,forceDL:!0,invertible:!0,isCartesian:!1,orderNodes:!0,noSharedTooltip:!0,pointArrayMap:["from","to","weight"],pointClass:F,searchPoint:b.noop}),P.registerSeriesType("sankey",u),u}),E(g,"masters/modules/sankey.src.js",[g["Core/Globals.js"]],function(b){return b})})})(de);var he=de.exports;const me=ue(he),ye=fe({__proto__:null,default:me},[he]);export{ye as s};
